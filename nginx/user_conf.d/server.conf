server {
    # Listen to port 443 on both IPv4 and IPv6.
    listen 443 ssl default_server reuseport;
    listen [::]:443 ssl default_server reuseport;

    # Domain names this server should respond to.
    server_name naqib.info;

    # Load the certificate files.
    ssl_certificate         /etc/letsencrypt/live/naqib.info/fullchain.pem;
    ssl_certificate_key     /etc/letsencrypt/live/naqib.info/privkey.pem;
    ssl_trusted_certificate /etc/letsencrypt/live/naqib.info/chain.pem;

    # Load the Diffie-Hellman parameter.
    ssl_dhparam /etc/letsencrypt/dhparams/dhparam.pem;

     location /
    {
        proxy_pass http://client:7001;
        proxy_set_header Host $host;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection upgrade;
        proxy_set_header Accept-Encoding gzip;
    }


}

#server {
#    if ($host = naqib.info) {
#        return 301 https://$host$request_uri;
#    } # managed by Certbot
#   listen 80;

#    server_name naqib.info;
#    access_log  /var/log/nginx/naqib.access.log;
#    return 301 https://naqib.info$request_uri;
#}
